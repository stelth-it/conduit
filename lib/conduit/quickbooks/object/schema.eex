<% alias Conduit.Quickbooks.Object.Field %>
defmodule <%= @module_name %> do 
 use Ecto.Schema
 import Ecto.Changeset

 @required_fields <%= 
 "["
 <>
 Enum.map_join(@field_atoms,",\n" ,fn atom -> ":" <> Atom.to_string(atom) end) 
 <>
 "]"
 %>

 @primary_key false
 schema "<%=@table_name%>" do
  <%= Enum.map_join(@fields, "\n", & Field.to_schema(&1)) %>
  timestamps()
 end

 def changeset(%__MODULE__{} = input, params \\ %{}) do
  input
  |> cast(params, @required_fields)
  |> validate_required(<%= inspect(@required_field_atoms) %>)
 end
end
